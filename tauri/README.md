# Tauri

## ç®€ä»‹

`tauri`æ˜¯ç”¨äºæ„å»ºå¤šå¹³å°éƒ¨ç½²ä¸€ä¸ª<u>ä¼˜åŒ–çš„ã€å®‰å…¨çš„ã€ç‹¬ç«‹äºå‰ç«¯çš„åº”ç”¨ç¨‹åº</u>çš„æ¡†æ¶ã€‚å¯è®¿é—®[https://v2.tauri.app/zh-cn/](https://v2.tauri.app/zh-cn/)äº†è§£æ›´å¤šã€‚

## æ­å»ºé¡¹ç›®

### åˆ›å»ºé¡¹ç›®
```bash
yarn create vite
```

```bash
yarn create v1.22.19
[1/4] ğŸ”  Resolving packages...
[2/4] ğŸšš  Fetching packages...
[3/4] ğŸ”—  Linking dependencies...
[4/4] ğŸ”¨  Building fresh packages...
success Installed "create-vite@5.5.5" with binaries:
      - create-vite
      - cva
? Project name: â€º vite-project
```

### è¾“å…¥é¡¹ç›®å

```bash
yarn create v1.22.19
[1/4] ğŸ”  Resolving packages...
[2/4] ğŸšš  Fetching packages...
[3/4] ğŸ”—  Linking dependencies...
[4/4] ğŸ”¨  Building fresh packages...
success Installed "create-vite@5.5.5" with binaries:
      - create-vite
      - cva
? Project name: â€º vite-react-tauri
```

### é€‰æ‹©æ¡†æ¶

```bash
yarn create v1.22.19
[1/4] ğŸ”  Resolving packages...
[2/4] ğŸšš  Fetching packages...
[3/4] ğŸ”—  Linking dependencies...
[4/4] ğŸ”¨  Building fresh packages...
success Installed "create-vite@5.5.5" with binaries:
      - create-vite
      - cva
âœ” Project name: â€¦ vite-react-tauri
? Select a framework: â€º - Use arrow-keys. Return to submit.
    Vanilla
    Vue
â¯   React
    Preact
    Lit
    Svelte
    Solid
    Qwik
    Angular
    Others
```

### é€‰æ‹©å¼€å‘è¯­è¨€

```bash
yarn create v1.22.19
[1/4] ğŸ”  Resolving packages...
[2/4] ğŸšš  Fetching packages...
[3/4] ğŸ”—  Linking dependencies...
[4/4] ğŸ”¨  Building fresh packages...
success Installed "create-vite@5.5.5" with binaries:
      - create-vite
      - cva
âœ” Project name: â€¦ vite-react-tauri
âœ” Select a framework: â€º React
? Select a variant: â€º - Use arrow-keys. Return to submit.
â¯   TypeScript
    TypeScript + SWC
    JavaScript
    JavaScript + SWC
    Remix â†—
```

```bash
yarn create v1.22.19
[1/4] ğŸ”  Resolving packages...
[2/4] ğŸšš  Fetching packages...
[3/4] ğŸ”—  Linking dependencies...
[4/4] ğŸ”¨  Building fresh packages...
success Installed "create-vite@5.5.5" with binaries:
      - create-vite
      - cva
âœ” Project name: â€¦ vite-react-tauri
âœ” Select a framework: â€º React
âœ” Select a variant: â€º TypeScript

Scaffolding project in /Users/weizuxiao/Documents/weizuxiao/learning-notes/tauri/vite-react-tauri...

Done. Now run:

  cd vite-react-tauri
  yarn
  yarn dev

âœ¨  Done in 82.56s.
```

### ä¿®æ”¹`vite.config.ts`

```ts
import { defineConfig } from 'vite'

export default defineConfig({
  // prevent vite from obscuring rust errors
  clearScreen: false,
  // Tauri expects a fixed port, fail if that port is not available
  server: {
    strictPort: true,
  },
  // to access the Tauri environment variables set by the CLI with information about the current target
  envPrefix: ['VITE_', 'TAURI_PLATFORM', 'TAURI_ARCH', 'TAURI_FAMILY', 'TAURI_PLATFORM_VERSION', 'TAURI_PLATFORM_TYPE', 'TAURI_DEBUG'],
  build: {
    // Tauri uses Chromium on Windows and WebKit on macOS and Linux
    target: process.env.TAURI_PLATFORM == 'windows' ? 'chrome105' : 'safari13',
    // don't minify for debug builds
    minify: !process.env.TAURI_DEBUG ? 'esbuild' : false,
    // produce sourcemaps for debug builds
    sourcemap: !!process.env.TAURI_DEBUG,
  },
})
```

### åˆ›å»º`Rust`å·¥ç¨‹

```bash
yarn add -D @tauri-apps/cli@^1.0.0
```

```bash
yarn add v1.22.19
info No lockfile found.
warning package-lock.json found. Your project contains lock files generated by tools other than Yarn. It is advised not to mix package managers in order to avoid resolution inconsistencies caused by unsynchronized lock files. To clear this warning, remove package-lock.json.
[1/4] ğŸ”  Resolving packages...
[2/4] ğŸšš  Fetching packages...
[3/4] ğŸ”—  Linking dependencies...
[4/4] ğŸ”¨  Building fresh packages...
success Saved lockfile.
success Saved 153 new dependencies.
info Direct dependencies
â”œâ”€ @eslint/js@9.15.0
â”œâ”€ @tauri-apps/cli@1.6.3
â”œâ”€ @types/node@22.9.4
â”œâ”€ @types/react-dom@18.3.1
â”œâ”€ @types/react@18.3.12
â”œâ”€ @vitejs/plugin-react@4.3.3
â”œâ”€ eslint-plugin-react-hooks@5.0.0
â”œâ”€ eslint-plugin-react-refresh@0.4.14
â”œâ”€ eslint@9.15.0
â”œâ”€ globals@15.12.0
â”œâ”€ react-dom@18.3.1
â”œâ”€ react@18.3.1
â”œâ”€ typescript-eslint@8.16.0
â”œâ”€ typescript@5.6.3
â””â”€ vite@5.4.11
info All dependencies
â”œâ”€ @ampproject/remapping@2.3.0
â”œâ”€ @babel/compat-data@7.26.2
â”œâ”€ @babel/core@7.26.0
â”œâ”€ @babel/generator@7.26.2
â”œâ”€ @babel/helper-compilation-targets@7.25.9
â”œâ”€ @babel/helper-module-imports@7.25.9
â”œâ”€ @babel/helper-module-transforms@7.26.0
â”œâ”€ @babel/helper-string-parser@7.25.9
â”œâ”€ @babel/helper-validator-option@7.25.9
â”œâ”€ @babel/helpers@7.26.0
â”œâ”€ @babel/parser@7.26.2
â”œâ”€ @babel/plugin-transform-react-jsx-self@7.25.9
â”œâ”€ @babel/plugin-transform-react-jsx-source@7.25.9
â”œâ”€ @esbuild/darwin-arm64@0.21.5
â”œâ”€ @eslint-community/eslint-utils@4.4.1
â”œâ”€ @eslint-community/regexpp@4.12.1
â”œâ”€ @eslint/config-array@0.19.0
â”œâ”€ @eslint/core@0.9.0
â”œâ”€ @eslint/eslintrc@3.2.0
â”œâ”€ @eslint/js@9.15.0
â”œâ”€ @eslint/object-schema@2.1.4
â”œâ”€ @eslint/plugin-kit@0.2.3
â”œâ”€ @humanfs/core@0.19.1
â”œâ”€ @humanfs/node@0.16.6
â”œâ”€ @humanwhocodes/module-importer@1.0.1
â”œâ”€ @humanwhocodes/retry@0.4.1
â”œâ”€ @jridgewell/resolve-uri@3.1.2
â”œâ”€ @jridgewell/set-array@1.2.1
â”œâ”€ @jridgewell/sourcemap-codec@1.5.0
â”œâ”€ @nodelib/fs.scandir@2.1.5
â”œâ”€ @nodelib/fs.stat@2.0.5
â”œâ”€ @nodelib/fs.walk@1.2.8
â”œâ”€ @rollup/rollup-darwin-arm64@4.27.4
â”œâ”€ @tauri-apps/cli-darwin-arm64@1.6.3
â”œâ”€ @tauri-apps/cli@1.6.3
â”œâ”€ @types/babel__core@7.20.5
â”œâ”€ @types/babel__generator@7.6.8
â”œâ”€ @types/babel__template@7.4.4
â”œâ”€ @types/babel__traverse@7.20.6
â”œâ”€ @types/estree@1.0.6
â”œâ”€ @types/json-schema@7.0.15
â”œâ”€ @types/node@22.9.4
â”œâ”€ @types/prop-types@15.7.13
â”œâ”€ @types/react-dom@18.3.1
â”œâ”€ @types/react@18.3.12
â”œâ”€ @typescript-eslint/eslint-plugin@8.16.0
â”œâ”€ @typescript-eslint/parser@8.16.0
â”œâ”€ @typescript-eslint/type-utils@8.16.0
â”œâ”€ @vitejs/plugin-react@4.3.3
â”œâ”€ acorn-jsx@5.3.2
â”œâ”€ acorn@8.14.0
â”œâ”€ ansi-styles@4.3.0
â”œâ”€ argparse@2.0.1
â”œâ”€ brace-expansion@1.1.11
â”œâ”€ braces@3.0.3
â”œâ”€ browserslist@4.24.2
â”œâ”€ callsites@3.1.0
â”œâ”€ caniuse-lite@1.0.30001684
â”œâ”€ chalk@4.1.2
â”œâ”€ color-convert@2.0.1
â”œâ”€ color-name@1.1.4
â”œâ”€ concat-map@0.0.1
â”œâ”€ convert-source-map@2.0.0
â”œâ”€ cross-spawn@7.0.6
â”œâ”€ csstype@3.1.3
â”œâ”€ deep-is@0.1.4
â”œâ”€ electron-to-chromium@1.5.65
â”œâ”€ esbuild@0.21.5
â”œâ”€ escalade@3.2.0
â”œâ”€ escape-string-regexp@4.0.0
â”œâ”€ eslint-plugin-react-hooks@5.0.0
â”œâ”€ eslint-plugin-react-refresh@0.4.14
â”œâ”€ eslint-scope@8.2.0
â”œâ”€ eslint@9.15.0
â”œâ”€ espree@10.3.0
â”œâ”€ esquery@1.6.0
â”œâ”€ esrecurse@4.3.0
â”œâ”€ esutils@2.0.3
â”œâ”€ fast-deep-equal@3.1.3
â”œâ”€ fast-glob@3.3.2
â”œâ”€ fast-json-stable-stringify@2.1.0
â”œâ”€ fast-levenshtein@2.0.6
â”œâ”€ fastq@1.17.1
â”œâ”€ file-entry-cache@8.0.0
â”œâ”€ fill-range@7.1.1
â”œâ”€ find-up@5.0.0
â”œâ”€ flat-cache@4.0.1
â”œâ”€ flatted@3.3.2
â”œâ”€ fsevents@2.3.3
â”œâ”€ gensync@1.0.0-beta.2
â”œâ”€ glob-parent@6.0.2
â”œâ”€ globals@15.12.0
â”œâ”€ graphemer@1.4.0
â”œâ”€ has-flag@4.0.0
â”œâ”€ ignore@5.3.2
â”œâ”€ import-fresh@3.3.0
â”œâ”€ imurmurhash@0.1.4
â”œâ”€ is-extglob@2.1.1
â”œâ”€ is-glob@4.0.3
â”œâ”€ is-number@7.0.0
â”œâ”€ isexe@2.0.0
â”œâ”€ js-tokens@4.0.0
â”œâ”€ js-yaml@4.1.0
â”œâ”€ jsesc@3.0.2
â”œâ”€ json-buffer@3.0.1
â”œâ”€ json-schema-traverse@0.4.1
â”œâ”€ json-stable-stringify-without-jsonify@1.0.1
â”œâ”€ json5@2.2.3
â”œâ”€ keyv@4.5.4
â”œâ”€ locate-path@6.0.0
â”œâ”€ lodash.merge@4.6.2
â”œâ”€ lru-cache@5.1.1
â”œâ”€ merge2@1.4.1
â”œâ”€ micromatch@4.0.8
â”œâ”€ ms@2.1.3
â”œâ”€ nanoid@3.3.7
â”œâ”€ node-releases@2.0.18
â”œâ”€ optionator@0.9.4
â”œâ”€ p-limit@3.1.0
â”œâ”€ p-locate@5.0.0
â”œâ”€ parent-module@1.0.1
â”œâ”€ path-exists@4.0.0
â”œâ”€ path-key@3.1.1
â”œâ”€ picocolors@1.1.1
â”œâ”€ picomatch@2.3.1
â”œâ”€ postcss@8.4.49
â”œâ”€ punycode@2.3.1
â”œâ”€ queue-microtask@1.2.3
â”œâ”€ react-dom@18.3.1
â”œâ”€ react-refresh@0.14.2
â”œâ”€ react@18.3.1
â”œâ”€ resolve-from@4.0.0
â”œâ”€ reusify@1.0.4
â”œâ”€ rollup@4.27.4
â”œâ”€ run-parallel@1.2.0
â”œâ”€ scheduler@0.23.2
â”œâ”€ shebang-command@2.0.0
â”œâ”€ shebang-regex@3.0.0
â”œâ”€ source-map-js@1.2.1
â”œâ”€ strip-json-comments@3.1.1
â”œâ”€ supports-color@7.2.0
â”œâ”€ to-regex-range@5.0.1
â”œâ”€ type-check@0.4.0
â”œâ”€ typescript-eslint@8.16.0
â”œâ”€ typescript@5.6.3
â”œâ”€ undici-types@6.19.8
â”œâ”€ update-browserslist-db@1.1.1
â”œâ”€ uri-js@4.4.1
â”œâ”€ vite@5.4.11
â”œâ”€ which@2.0.2
â”œâ”€ word-wrap@1.2.5
â”œâ”€ yallist@3.1.1
â””â”€ yocto-queue@0.1.0
âœ¨  Done in 10.18s.
```

```bash
yarn tauri init
```

```bash
yarn run v1.22.19
$ /Users/weizuxiao/Documents/weizuxiao/learning-notes/tauri/vite-react-tauri/node_modules/.bin/tauri init
âœ” What is your app name? Â· vite-react-tauri
âœ” What should the window title be? Â· vite-react-tauri
? Where are your web assets (HTML/CSS/JS) located, relative to the "<current dir>/src-tauri/tauri.conf.json" file that will be cre
âœ” Where are your web assets (HTML/CSS/JS) located, relative to the "<current dir>/src-tauri/tauri.conf.json" file that will be created? Â· ../dist
âœ” What is the url of your dev server? Â· http://localhost:5173
âœ” What is your frontend dev command? Â· npm run dev
âœ” What is your frontend build command? Â· npm run build
âœ¨  Done in 4653.50s.
```

### è¿è¡Œæ¼”ç¤º

```bash
yarn tauri dev
```

![](./assets/image1.png)

### IPCé€šä¿¡

```rs
#[tauri::command]
fn greet(name: &str) -> String {
   format!("Hello, {}!", name)
}

fn main() {
  tauri::Builder::default()
    .invoke_handler(tauri::generate_handler![greet])
    .run(tauri::generate_context!())
    .expect("error while running tauri application");
}
```

```bash
yarn add @tauri-apps/api@^1.0.0
```

```tsx
import { useState } from 'react'
import reactLogo from './assets/react.svg'
import viteLogo from '/vite.svg'
import './App.css'
import { invoke } from '@tauri-apps/api'

function App() {
    const [count, setCount] = useState(0)

    const onClick = () => {
        setCount((count) => count + 1)
        invoke('greet', { name: 'World' })
            // `invoke` returns a Promise
            .then((response) => console.log(response))
    }

    return (
        <>
            <div>
                <a href="https://vite.dev" target="_blank">
                    <img src={viteLogo} className="logo" alt="Vite logo" />
                </a>
                <a href="https://react.dev" target="_blank">
                    <img src={reactLogo} className="logo react" alt="React logo" />
                </a>
            </div>
            <h1>Vite + React</h1>
            <div className="card">
                <button onClick={onClick}>
                    count is {count}
                </button>
                <p>
                    Edit <code>src/App.tsx</code> and save to test HMR
                </p>
            </div>
            <p className="read-the-docs">
                Click on the Vite and React logos to learn more
            </p>
        </>
    )
}

export default App

```



